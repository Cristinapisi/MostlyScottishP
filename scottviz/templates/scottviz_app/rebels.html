{% extends "scottviz_app/base.html" %}

{% block content %}
<a class="btn btn-default back" href="/msp/msps"><i class="glyphicon glyphicon-circle-arrow-left"></i>All MSPs</a>
<a class="btn btn-default back" href="/msp/divisions"><i class="glyphicon glyphicon-circle-arrow-left"></i>All Divisions</a>
<a class="btn btn-default back" href="/msp/export_csv/rebellions"><i class="glyphicon glyphicon-download"></i> Export to Csv</a>
<a class="btn btn-default back" href="/msp/division/{{division.id}}">{{division.motionid}}</a>
{% if rebels %}
<div class="container">
    <div class="table-responsive">
        <table class="table table-hover sortable">
             <caption>A 'rebellion' is when an MSP votes differently than his party . Here you can see the 'rebels' that voted differently for this division. </caption>

            <thead>
            <tr>
                <th>MSP</th>
                <th>Party</th>
                <th>Party Vote</th>
                <th>MSP Vote</th>
                <th>Result</th>
                <th>Turnout</th>
            </tr>
            </thead>

            <tbody>
            {% for rebel in rebels %}

                {% if rebel.division.result == '1' %}
                    <tr class="bg-success">
                        <td><a href="/msp/msp/{{rebel.msp.foreignid}}">{{rebel.msp}}</a></td>
                        <td>{{rebel.msp.party}}</td>
                        {% if rebel in party_for %}
                            <td>For</td>
                        {% elif rebel in party_against %}
                            <td>Against</td>
                        {% elif rebel in party_abstain %}
                            <td>Abstain</td>
                        {% elif rebel in party_absent%}
                            <td>Absent</td>
                        {% else %}
                            <td>NA</td>
                        {% endif %}
                        {% if rebel in for %}
                            <td>For</td>
                        {% elif rebel in against %}
                            <td>Against</td>
                        {% elif rebel in abstain %}
                            <td>Abstain</td>
                        {% elif rebel in absent%}
                            <td>Absent</td>
                        {% else %}
                            <td>NA</td>
                        {% endif %}
                        <td>Carried</td>
                        <td>{{rebel.division.turnout}}% </td>
                    </tr>
                {% else %}
                    <tr>
                        <td><a href="/msp/msp/{{rebel.msp.foreignid}}">{{rebel.msp}}</a></td>
                        <td>{{rebel.msp.party}}</td>
                        {% if rebel in party_for %}
                            <td>For</td>
                        {% elif rebel in party_against %}
                            <td>Against</td>
                        {% elif rebel in party_abstain %}
                            <td>Abstain</td>
                        {% elif rebel in party_absent%}
                            <td>Absent</td>
                        {% else %}
                            <td>NA</td>
                        {% endif %}
                        {% if rebel in for %}
                            <td>For</td>
                        {% elif rebel in against %}
                            <td>Against</td>
                        {% elif rebel in abstain %}
                            <td>Abstain</td>
                        {% elif rebel in absent%}
                            <td>Absent</td>
                        {% else %}
                            <td>NA</td>
                        {% endif %}
                        <td>Defeated</td>
                        <td>{{rebel.division.turnout}}% </td>
                    </tr>
                {% endif %}
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}
{% endblock %}